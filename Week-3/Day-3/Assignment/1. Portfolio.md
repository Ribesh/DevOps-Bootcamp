# Create Portfolio and run in Docker

### Step 1. Download a sample from the internet and extract if required

### Step 2. Create a `Dockerfile` file
```bash
# Use small nginx base image
FROM nginx:alpine

# Clean default nginx static content
RUN rm -rf /usr/share/nginx/html/*

# Copy portfolio site into nginx document root
COPY . /usr/share/nginx/html/

# Expose HTTP port
EXPOSE 80

# Run nginx in foreground
CMD ["nginx", "-g", "daemon off;"]
```

### Step 3: Build the image
```bash
docker build -t ribesh-portfolio:1 .
```

### Step 4: Verify the image
```bash
docker images
```
![alt text](Images/image.png)

### Step 5: Run the image and verify
```bash
docker run -d --name ribesh-portfolio -p 80:80 ribesh-portfolio:1

docker ps
```

![alt text](Images/image-1.png)

### Step 6: Verify from the browser

![alt text](Images/image-2.png)

### Step 7: Customize the file according to your details

### Step 8: Build the image again and verify
```bash
docker build -t ribesh-protfolio:2 .

docker images
```
![alt text](Images/image-4.png)

### Step 9: Stop and remove the old container with image and run new container with new image
```bash
docker stop ribesh-portfolio
docker rmi ribesh-portfolio
```

```bash
docker run -d --name ribesh-portfolio -p 80:80 ribesh-portfolio:2
```

### Step 10: Verify from the browser
![alt text](Images/image-5.png)


## Building an amd64 image
### Step 1: First Verify
```bash
docker buildx version
docker buildx ls
```

#### Output:
```bash
github.com/docker/buildx v0.30.1 9e66234aa13328a5e75b75aa5574e1ca6d6d9c01

NAME/NODE     DRIVER/ENDPOINT   STATUS    BUILDKIT   PLATFORMS
default*      docker                                 
 \_ default    \_ default       running   v0.26.2    linux/arm64
```

### Step 2: Run below commands
```bash
sudo apt update
sudo apt install qemu-user-static

docker buildx create --name multiarch --driver docker-container --use
docker buildx inspect --bootstrap
docker buildx ls
```

### Step 3: Build an amd64 image
```bash
docker buildx build --platform linux/amd64 -t ribeshshr/portfolio:amd --load .
```

### Step 4: Push Image
```bash
docker push ribeshshr/portfolio:amd 
```

### Step 5: Run the Image
```
docker run -d -p 80:80 --name ribesh-portfolio ribeshshr/portfolio:amd
```

### Recording
![](Images/Recording.gif)